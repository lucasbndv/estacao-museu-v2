<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>Your first HTML form, styled</title><style>form, div.center {margin: 0 auto;width: 400px;padding: 1em;border: 1px solid #ccc;border-radius: 1em;}table {border-collapse: collapse;width: 100%;margin: 0 auto;margin-bottom: 1em;}table th {text-align: left;}tbody tr:nth-child(odd) {background-color: rgba(0, 0, 255, .1);}tbody {border-top: 2px solid rgba(0, 0, 255, .2);border-bottom: 2px solid rgba(0, 0, 255, .2);}tbody tr {padding: 1em; }ul {list-style: none;padding: 0;margin: 0;}form li + li {margin-top: 1em;}label {display: inline-block;width: 90px;text-align: right;}input,textarea {font: 1em sans-serif;width: 300px;box-sizing: border-box; /* To harmonize the look & feel of text field border */border: 1px solid #999;}input:focus,textarea:focus {border-color: #000;}textarea {vertical-align: top;height: 5em;}.button {padding-left: 90px;}button {margin-left: 0.5em;}#btn-ap-scan {margin: 0 auto;}</style></head><body><div class="center"><table><colgroup></colgroup><thead><th scope="col">SSID</th><th scope="col">Signal</th></thead><tbody id="table-body"></tbody></table><button id="btn-ap-scan">Scan APs</button></div><form id="formElem" action="/post" method="post"><ul><li><label for="ap-name">Access Point:</label><input type="text" id="ap-name" name="ap-name" /></li><li><li><label for="ap-pass">Password:</label><input type="password" id="ap-pass" name="ap-pass" /></li><li class="button"><button type="submit">Connect</button></li></ul></form><script>const button_scan = document.getElementById("btn-ap-scan");button_scan.onclick = scanAPs;async function scanAPs(e) {console.log("scan clicked");button_scan.setAttribute("disabled", "disabled");button_scan.innerHTML = "Scanning APs...";let res = await fetch("/api/ap-scan", {method: "GET", headers: {"Content-Type": "application/json",}});let text = await res.text();data = JSON.parse(text);let tbody = document.getElementById("table-body");data.forEach(d => {let tr = document.createElement("tr");let ssid = document.createElement("td");ssid.innerHTML = String(d.ssid);let signal = document.createElement("td");signal.innerHTML = String(d.rssi);tr.appendChild(ssid);tr.appendChild(signal);tbody.appendChild(tr); });button_scan.innerHTML = "Scan APs";button_scan.removeAttribute("disabled");};document.addEventListener("DOMContentLoaded", scanAPs);</script></body></html>
